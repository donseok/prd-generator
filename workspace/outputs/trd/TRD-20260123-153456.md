# **차량 계량 관리 시스템** - 기술 요구사항 문서 (TRD)

**버전**: 1.0 | **상태**: DRAFT
**생성일**: 2026-01-23 15:34
**원본 PRD**: **차량 계량 관리 시스템** (PRD-20260123-ea69)

---

## 1. 기술 요약

# 차량 계량 관리 시스템 기술 요약문

본 시스템은 물류 및 자원 관리 현장의 차량 계량 업무를 디지털화하여 운영 효율성을 극대화하는 통합 플랫폼입니다.

핵심 기술 결정사항으로 마이크로서비스 아키텍처와 이벤트 기반 패턴을 채택하였습니다. 이는 다중 계량대 환경에서 독립적인 서비스 확장과 장애 격리를 가능케 하며, 실시간 데이터 처리의 안정성을 확보합니다. 프론트엔드는 React 18과 TypeScript로 웹과 모바일(React Native)을 통합 개발하여 코드 재사용성을 높였고, 백엔드는 Python FastAPI로 고성능 비동기 처리를 구현합니다. 데이터 계층은 PostgreSQL로 트랜잭션 무결성을, Redis로 캐싱 및 실시간 세션 관리를 담당합니다.

아키텍처의 주요 특징은 AWS 클라우드 네이티브 환경에서의 고가용성 구성입니다. 168개 기능과 42개 비기능 요구사항을 수용하는 확장 가능한 구조로, 계량 데이터 수집부터 통계 분석까지 전 과정을 자동화합니다.

기술적 리스크로는 계량 장비와의 하드웨어 연동 호환성, 실시간 대용량 데이터 처리 시 병목 현상이 예상됩니다. 이에 대응하여 표준화된 장비 인터페이스 어댑터 패턴을 적용하고, 이벤트 큐 기반 비동기 처리와 수평 확장 전략으로 성능을 보장할 계획입니다.

## 2. 기술 스택

### Frontend (Web)

- React 18
- TypeScript
- Tailwind CSS
- Recharts
- React Query
- Zustand

**선정 이유**: 실시간 대시보드와 차트 시각화 요구사항에 React 18의 Concurrent Features가 적합합니다. 5초 간격 자동 갱신에 React Query의 캐싱/폴링 기능 활용, Recharts로 시간대별 계량 차트 구현, Zustand로 경량 상태 관리가 가능합니다. TypeScript로 계량 데이터 타입 안정성을 확보하고, Tailwind CSS로 반응형 위젯 UI를 빠르게 구축할 수 있습니다.

### Frontend (Mobile)

- React Native
- TypeScript
- React Navigation
- React Native Paper

**선정 이유**: 웹과 모바일 간 코드 공유 및 개발 생산성을 위해 React Native를 선택합니다. 운전기사 이력 조회, 계량 현황 확인 등 모바일 요구사항을 iOS/Android 동시 지원하며, 웹 개발팀의 React 경험을 그대로 활용할 수 있습니다.

### Backend

- Python 3.11
- FastAPI
- SQLAlchemy 2.0
- Pydantic v2
- Celery
- Redis

**선정 이유**: FastAPI의 비동기 처리로 실시간 계량 데이터 수신 및 WebSocket 기반 현황 업데이트를 효율적으로 처리합니다. 인디케이터(계량기) 연동을 위한 시리얼 통신 또는 TCP/IP 프로토콜 처리에 Python이 유연하며, SQLAlchemy 2.0으로 복잡한 통계 쿼리(일/월별 집계, 회사별 현황)를 ORM으로 구현합니다. Celery로 통계 배치 처리와 과적 알림을 비동기 수행합니다.

### Database

- PostgreSQL 15
- Redis 7

**선정 이유**: PostgreSQL의 윈도우 함수와 집계 함수로 계량 통계(일평균, 월별 집계, 처리시간 계산)를 효율적으로 수행합니다. 파티셔닝으로 대용량 계량 이력 데이터를 관리하고, JSONB로 수정 이력을 유연하게 저장합니다. Redis는 실시간 계량대 상태 캐싱, 대기열 관리, 세션 저장에 활용됩니다. AWS RDS Multi-AZ로 고가용성 요구사항을 충족합니다.

### Infrastructure

- Docker
- AWS ECS Fargate
- AWS RDS
- AWS ElastiCache
- CloudFront
- ALB
- Site-to-Site VPN

**선정 이유**: Medium 확장성 요구에 ECS Fargate가 적합하며, Kubernetes 대비 운영 복잡도가 낮습니다. CloudFront로 정적 파일 배포, ALB로 로드 밸런싱, RDS Multi-AZ로 DB 고가용성을 확보합니다. Site-to-Site VPN으로 현장 계량기와 안전한 통신을 구성하고, Security Group 최소 권한 원칙을 적용합니다.

### DevOps & Monitoring

- GitHub Actions
- Terraform
- CloudWatch
- AWS X-Ray

**선정 이유**: GitHub Actions로 CI/CD 파이프라인 구축, Terraform으로 인프라 코드 관리를 수행합니다. CloudWatch로 계량 처리 시간(8.5분 SLA) 모니터링 및 알림을 설정하고, X-Ray로 API 성능 추적이 가능합니다.

### Security & Auth

- AWS Cognito
- AWS IAM
- AWS Secrets Manager

**선정 이유**: Cognito로 사용자 인증 및 역할 기반 권한 관리(데이터 수정 권한 제한)를 구현합니다. IAM으로 AWS 리소스 접근 제어, Secrets Manager로 DB 자격증명 및 API 키를 안전하게 관리합니다. Standard 보안 수준에 적합한 구성입니다.

## 3. 시스템 아키텍처

### 3.1 아키텍처 개요

차량 계량 관리 시스템은 마이크로서비스 기반의 클라우드 네이티브 아키텍처로 설계되었습니다. 다중 계량대의 실시간 데이터 수집, 차량/운전기사 마스터 관리, 통계 분석을 위한 확장 가능한 구조를 제공하며, AWS 인프라를 활용하여 고가용성과 보안을 보장합니다.

**아키텍처 스타일**: Microservices with Event-Driven patterns

### 3.2 아키텍처 레이어

#### Presentation Layer
사용자 인터페이스를 담당하는 계층으로, 웹과 모바일 클라이언트를 통해 계량 데이터 조회, 마스터 관리, 실시간 현황 모니터링 기능을 제공합니다.

| 컴포넌트 | 타입 | 설명 |
|----------|------|------|
| Web Application | frontend | React 18 기반 SPA로 관리자 및 운영자용 대시보드 제공 |
| Mobile Application | frontend | React Native 기반 모바일 앱으로 현장 운전기사 및 계량원용 |

#### API Gateway Layer
모든 클라이언트 요청의 단일 진입점으로, 인증/인가, 라우팅, 속도 제한, 요청 로깅을 담당합니다.

| 컴포넌트 | 타입 | 설명 |
|----------|------|------|
| AWS ALB + API Gateway | gateway | Application Load Balancer와 연계된 API 게이트웨이 |

#### Application Layer
비즈니스 로직을 처리하는 마이크로서비스들로 구성되며, 각 서비스는 독립적으로 배포 및 확장 가능합니다.

| 컴포넌트 | 타입 | 설명 |
|----------|------|------|
| Weighing Service | microservice | 계량 데이터 기록 및 조회를 담당하는 핵심 서비스 |
| Vehicle Service | microservice | 차량 마스터 정보 관리 서비스 |
| Driver Service | microservice | 운전기사 정보 관리 서비스 |
| Company Service | microservice | 소속회사 관리 서비스 |
| Statistics Service | microservice | 계량 통계 및 분석 서비스 |
| Real-time Service | microservice | 실시간 현황 데이터 제공 서비스 |
| Notification Service | microservice | 알림 발송 서비스 |

#### Integration Layer
외부 시스템 연동 및 비동기 처리를 담당하는 계층입니다.

| 컴포넌트 | 타입 | 설명 |
|----------|------|------|
| Scale Bridge Service | integration | 물리적 계량대 장비와의 연동 서비스 (Site-to-Site VPN 통해 온프레미스 연결) |
| Event Bus (Redis Streams) | message-broker | 서비스 간 이벤트 기반 통신을 위한 메시지 브로커 |
| Background Worker (Celery) | worker | 비동기 작업 처리를 위한 워커 |

#### Data Layer
데이터 저장 및 캐싱을 담당하는 계층으로, 고가용성과 성능을 보장합니다.

| 컴포넌트 | 타입 | 설명 |
|----------|------|------|
| PostgreSQL (AWS RDS) | database | 주요 비즈니스 데이터 저장소 |
| Redis (AWS ElastiCache) | cache | 캐싱 및 실시간 데이터 처리 |

#### Security Layer
인증, 인가, 보안 관련 기능을 담당하는 횡단 관심사 계층입니다.

| 컴포넌트 | 타입 | 설명 |
|----------|------|------|
| AWS Cognito | identity-provider | 사용자 인증 및 토큰 관리 |
| AWS IAM | authorization | AWS 리소스 접근 제어 |
| AWS Secrets Manager | secrets | 민감 정보 관리 |

#### Infrastructure Layer
컨테이너 오케스트레이션, 배포, 모니터링을 담당하는 인프라 계층입니다.

| 컴포넌트 | 타입 | 설명 |
|----------|------|------|
| AWS ECS Fargate | container-orchestration | 서버리스 컨테이너 실행 환경 |
| CloudFront | cdn | 정적 콘텐츠 배포 및 캐싱 |
| Monitoring Stack | observability | 모니터링 및 추적 시스템 |
| CI/CD Pipeline | devops | GitHub Actions 기반 자동화 파이프라인 |

### 3.3 데이터 흐름

사용자 요청은 CloudFront/ALB를 통해 API Gateway로 전달되고, Cognito에서 JWT 토큰 검증 후 적절한 마이크로서비스로 라우팅됩니다. 계량대에서 수집된 데이터는 Site-to-Site VPN을 통해 Scale Bridge Service로 전송되고, Weighing Service에서 검증 후 PostgreSQL에 저장됩니다. 최대적재량 초과 시 이벤트가 발행되어 Notification Service가 알림을 발송합니다. Real-time Service는 Redis Pub/Sub을 통해 계량 이벤트를 수신하여 WebSocket으로 클라이언트에 실시간 현황을 푸시합니다. Statistics Service는 Celery 워커를 통해 주기적으로 통계를 집계하고 Redis에 캐싱하여 대시보드 위젯에 빠른 응답을 제공합니다.

## 6. 보안 요구사항

| 카테고리 | 요구사항 | 구현 방안 | 우선순위 |
|----------|----------|----------|----------|
| NFR-Based | 데이터 수정 권한 제한 | 오류 데이터 수정은 권한자에 한함 | HIGH |
| NFR-Based | 최소 권한 원칙 보안그룹 | 보안그룹에 최소 권한 원칙 적용 | HIGH |
| NFR-Based | 사용자 인증 | 웹/앱 로그인 인증 및 권한 관리 | HIGH |
| NFR-Based | 데이터 암호화 | 개인정보 및 민감 데이터 암호화 저장 | HIGH |
| NFR-Based | OAuth 2.0 인증 | ERP 연동 시 OAuth 2.0 Client Credentials Grant 방식의 인증 적용 | HIGH |
| NFR-Based | TLS 1.2 이상 암호화 통신 | 데이터 전송 시 TLS 1.2 이상의 암호화 프로토콜 필수 적용 | HIGH |
| Authentication | 사용자 인증 체계 구축 | JWT 기반 토큰 인증 | HIGH |
| Authorization | 역할 기반 접근 제어(RBAC) | 사용자 역할별 권한 관리 | HIGH |
| Data Protection | 민감 데이터 암호화 | AES-256 암호화 적용 | HIGH |

## 7. 성능 요구사항

| 성능 지표 | 목표 값 | 측정 방법 |
|----------|---------|----------|
| 앱 응답속도 | 모바일 앱 화면 로딩 3초 이내 | 성능 테스트 도구 활용 |

## 8. 인프라 요구사항

| 카테고리 | 사양 | 수량 | 용도 |
|----------|------|------|------|
| Compute | Application Server (4 vCPU, 16GB RAM) | 2 | 웹 애플리케이션 서버 |
| Database | Managed Database (8 vCPU, 32GB RAM, 500GB SSD) | 1 (Primary-Replica) | 주 데이터베이스 |
| Storage | Object Storage (S3/GCS) | 500GB | 파일 저장소 |
| Network | Load Balancer + CDN | 1 | 트래픽 분산 및 정적 콘텐츠 배포 |

## 9. 기술 리스크

| 리스크 | 위험도 | 영향 | 대응방안 |
|--------|--------|------|----------|
| 외부 시스템 연동 복잡성 | MEDIUM | 연동 인터페이스 변경 시 추가 개발 필요 | 사전 인터페이스 정의 및 Mock 서버 활용 |
| 대용량 데이터 처리 성능 | MEDIUM | 응답 시간 지연 및 시스템 과부하 | 캐싱 전략 및 비동기 처리 적용 |
| 보안 취약점 발생 가능성 | HIGH | 데이터 유출 및 서비스 중단 | 보안 코드 리뷰 및 취약점 스캔 정기 수행 |

---

*본 TRD는 '**차량 계량 관리 시스템**' PRD를 기반으로 자동 생성되었습니다.*