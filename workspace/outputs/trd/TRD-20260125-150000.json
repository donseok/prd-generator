{
  "id": "TRD-20260125-150000",
  "title": "차량 계량대 시스템 재구축",
  "version": "1.0",
  "status": "draft",
  "based_on_prd": "PRD-20260125-143000",
  "created_at": "2026-01-25T15:00:00+09:00",
  "technology_stack": {
    "frontend_web": [
      {"category": "Framework", "technology": "React", "version": "18.x", "reason": "컴포넌트 기반 개발, 풍부한 생태계, 실시간 데이터 갱신에 적합"},
      {"category": "State Management", "technology": "Zustand", "version": "4.x", "reason": "간결한 API, 작은 번들 사이즈, Redux 대비 낮은 러닝커브"},
      {"category": "UI Library", "technology": "Ant Design", "version": "5.x", "reason": "관리자용 대시보드에 최적화된 컴포넌트, 한국어 지원"},
      {"category": "Charting", "technology": "Recharts", "version": "2.x", "reason": "React 친화적, 막대/라인 차트 시각화 지원"},
      {"category": "Build Tool", "technology": "Vite", "version": "5.x", "reason": "빠른 HMR, 최적화된 빌드 성능"},
      {"category": "HTTP Client", "technology": "Axios", "version": "1.x", "reason": "인터셉터, 요청 취소, 자동 재시도 기능"},
      {"category": "WebSocket", "technology": "Socket.io-client", "version": "4.x", "reason": "실시간 데이터 갱신, 자동 재연결 지원"}
    ],
    "frontend_mobile": [
      {"category": "Framework", "technology": "Flutter", "version": "3.x", "reason": "iOS/Android 크로스 플랫폼, 네이티브 수준 성능"},
      {"category": "State Management", "technology": "Riverpod", "version": "2.x", "reason": "타입 안전성, 의존성 주입 지원"},
      {"category": "Push Notification", "technology": "Firebase Messaging", "version": "Latest", "reason": "FCM 기반 iOS/Android 통합 푸시"},
      {"category": "Local Storage", "technology": "Hive", "version": "2.x", "reason": "경량 NoSQL, 오프라인 데이터 캐싱"},
      {"category": "HTTP Client", "technology": "Dio", "version": "5.x", "reason": "인터셉터, 재시도, 파일 다운로드 지원"}
    ],
    "backend": [
      {"category": "Language", "technology": "Python", "version": "3.11", "reason": "개발 생산성, 풍부한 라이브러리, PRD 명시"},
      {"category": "Framework", "technology": "FastAPI", "version": "0.109", "reason": "비동기 지원, 자동 OpenAPI 문서화, 높은 성능"},
      {"category": "ORM", "technology": "SQLAlchemy", "version": "2.x", "reason": "타입 힌트 지원, 비동기 쿼리 지원"},
      {"category": "Migration", "technology": "Alembic", "version": "1.x", "reason": "SQLAlchemy 호환, 버전 관리 마이그레이션"},
      {"category": "Task Queue", "technology": "Celery", "version": "5.x", "reason": "배치 작업, ERP 마감 전송, 리포트 생성"},
      {"category": "Message Broker", "technology": "Redis", "version": "7.x", "reason": "Celery 브로커, 세션 캐싱, pub/sub"},
      {"category": "WebSocket", "technology": "Socket.io", "version": "5.x", "reason": "실시간 양방향 통신, 자동 재연결"}
    ],
    "edge_server": [
      {"category": "Language", "technology": "Python", "version": "3.11", "reason": "백엔드와 동일 기술 스택, 유지보수 용이"},
      {"category": "Serial Communication", "technology": "pyserial", "version": "3.x", "reason": "RS-232 시리얼 통신 표준 라이브러리"},
      {"category": "Local DB", "technology": "SQLite", "version": "3.x", "reason": "경량, 네트워크 단절 시 로컬 버퍼링"},
      {"category": "HTTP Client", "technology": "httpx", "version": "0.27", "reason": "비동기 HTTP 클라이언트"},
      {"category": "Process Manager", "technology": "Supervisor", "version": "4.x", "reason": "프로세스 자동 재시작, 로그 관리"}
    ],
    "database": [
      {"category": "Primary DB", "technology": "PostgreSQL (RDS)", "version": "15.x", "reason": "ACID 보장, Multi-AZ 지원, JSON 타입 지원"},
      {"category": "Cache", "technology": "Redis (ElastiCache)", "version": "7.x", "reason": "세션 관리, 실시간 데이터 캐싱, pub/sub"},
      {"category": "Search", "technology": "PostgreSQL Full-Text", "version": "15.x", "reason": "별도 검색 엔진 불필요, 차량번호/기사명 검색 충분"}
    ],
    "infrastructure": [
      {"category": "Cloud Provider", "technology": "AWS", "reason": "국내 리전(서울) 지원, Multi-AZ, Auto Scaling"},
      {"category": "Container", "technology": "Docker", "reason": "환경 일관성, 배포 자동화"},
      {"category": "Orchestration", "technology": "ECS Fargate", "reason": "서버리스 컨테이너, 관리 오버헤드 최소화"},
      {"category": "Load Balancer", "technology": "ALB", "reason": "HTTPS 종료, WebSocket 지원, 헬스체크"},
      {"category": "CI/CD", "technology": "GitHub Actions", "reason": "코드 저장소 통합, 비용 효율적"},
      {"category": "Monitoring", "technology": "CloudWatch + Grafana", "reason": "AWS 네이티브 메트릭 + 커스텀 대시보드"},
      {"category": "APM", "technology": "AWS X-Ray", "reason": "분산 트레이싱, 성능 병목 분석"},
      {"category": "Log Management", "technology": "CloudWatch Logs", "reason": "중앙화된 로그 관리, 알람 연동"}
    ]
  },
  "system_architecture": {
    "components": [
      {"name": "ALB", "role": "HTTPS 종료, 라우팅, 헬스체크, WebSocket 지원", "technology": "AWS Application Load Balancer"},
      {"name": "ECS Fargate", "role": "컨테이너 기반 API 서버, Auto Scaling", "technology": "Docker, FastAPI"},
      {"name": "RDS", "role": "계량 데이터, 차량/기사 정보 저장", "technology": "PostgreSQL 15, Multi-AZ"},
      {"name": "ElastiCache", "role": "세션 캐시, 실시간 대기열, pub/sub", "technology": "Redis 7"},
      {"name": "S3", "role": "정적 파일, 전표 이미지, 리포트 파일 저장", "technology": "AWS S3"},
      {"name": "CloudFront", "role": "정적 자원 CDN, 글로벌 엣지 캐싱", "technology": "AWS CloudFront"},
      {"name": "Edge Server", "role": "인디케이터 데이터 수집, 로컬 버퍼링, 전광판 제어", "technology": "Python, pyserial"},
      {"name": "CloudWatch", "role": "메트릭 수집, 로그 관리, 알람", "technology": "AWS CloudWatch"}
    ],
    "communications": [
      {"from": "웹/앱 클라이언트", "to": "ALB", "protocol": "HTTPS", "port": 443, "description": "REST API, WebSocket 통신"},
      {"from": "ALB", "to": "ECS", "protocol": "HTTP", "port": 8000, "description": "내부 API 서버 통신"},
      {"from": "ECS", "to": "RDS", "protocol": "TCP", "port": 5432, "description": "PostgreSQL 연결"},
      {"from": "ECS", "to": "ElastiCache", "protocol": "TCP", "port": 6379, "description": "Redis 캐시 연결"},
      {"from": "Edge Server", "to": "ECS", "protocol": "HTTPS", "port": 443, "description": "계량 데이터 전송"},
      {"from": "Edge Server", "to": "인디케이터", "protocol": "RS-232", "port": null, "description": "시리얼 통신 (9600bps)"},
      {"from": "Edge Server", "to": "전광판", "protocol": "TCP", "port": 5000, "description": "순번 표시 데이터"},
      {"from": "ECS", "to": "ERP", "protocol": "HTTPS", "port": 443, "description": "OAuth 2.0 인증 REST API"}
    ]
  },
  "database_design": {
    "entities": [
      {
        "name": "Company",
        "description": "소속회사",
        "columns": [
          {"name": "id", "type": "BIGSERIAL", "nullable": false, "default": "AUTO", "description": "Primary Key"},
          {"name": "name", "type": "VARCHAR(100)", "nullable": false, "description": "회사명"},
          {"name": "business_no", "type": "VARCHAR(20)", "nullable": true, "description": "사업자등록번호"},
          {"name": "contact", "type": "VARCHAR(50)", "nullable": true, "description": "연락처"},
          {"name": "address", "type": "VARCHAR(200)", "nullable": true, "description": "주소"},
          {"name": "is_active", "type": "BOOLEAN", "nullable": false, "default": "TRUE", "description": "활성 여부"},
          {"name": "created_at", "type": "TIMESTAMPTZ", "nullable": false, "default": "NOW()", "description": "생성일시"},
          {"name": "updated_at", "type": "TIMESTAMPTZ", "nullable": false, "default": "NOW()", "description": "수정일시"}
        ]
      },
      {
        "name": "Vehicle",
        "description": "차량",
        "columns": [
          {"name": "id", "type": "BIGSERIAL", "nullable": false, "default": "AUTO", "description": "Primary Key"},
          {"name": "plate_number", "type": "VARCHAR(20)", "nullable": false, "description": "차량번호 (UNIQUE)"},
          {"name": "vehicle_type", "type": "VARCHAR(50)", "nullable": true, "description": "차종"},
          {"name": "tare_weight", "type": "DECIMAL(10,2)", "nullable": true, "description": "공차중량 (kg)"},
          {"name": "max_load", "type": "DECIMAL(10,2)", "nullable": true, "description": "최대적재량 (kg)"},
          {"name": "company_id", "type": "BIGINT", "nullable": true, "description": "소속회사 FK"},
          {"name": "is_active", "type": "BOOLEAN", "nullable": false, "default": "TRUE", "description": "활성 여부"},
          {"name": "created_at", "type": "TIMESTAMPTZ", "nullable": false, "default": "NOW()", "description": "생성일시"},
          {"name": "updated_at", "type": "TIMESTAMPTZ", "nullable": false, "default": "NOW()", "description": "수정일시"}
        ]
      },
      {
        "name": "Driver",
        "description": "운전기사",
        "columns": [
          {"name": "id", "type": "BIGSERIAL", "nullable": false, "default": "AUTO", "description": "Primary Key"},
          {"name": "name", "type": "VARCHAR(50)", "nullable": false, "description": "기사명"},
          {"name": "phone", "type": "BYTEA", "nullable": false, "description": "연락처 (AES-256 암호화)"},
          {"name": "company_id", "type": "BIGINT", "nullable": true, "description": "소속회사 FK"},
          {"name": "app_user_id", "type": "BIGINT", "nullable": true, "description": "앱 계정 FK"},
          {"name": "is_active", "type": "BOOLEAN", "nullable": false, "default": "TRUE", "description": "활성 여부"},
          {"name": "created_at", "type": "TIMESTAMPTZ", "nullable": false, "default": "NOW()", "description": "생성일시"},
          {"name": "updated_at", "type": "TIMESTAMPTZ", "nullable": false, "default": "NOW()", "description": "수정일시"}
        ]
      },
      {
        "name": "WeighStation",
        "description": "계량대",
        "columns": [
          {"name": "id", "type": "BIGSERIAL", "nullable": false, "default": "AUTO", "description": "Primary Key"},
          {"name": "name", "type": "VARCHAR(50)", "nullable": false, "description": "계량대명"},
          {"name": "indicator_type", "type": "VARCHAR(20)", "nullable": false, "description": "제조사 (A/B)"},
          {"name": "protocol", "type": "VARCHAR(100)", "nullable": true, "description": "통신 프로토콜 정보"},
          {"name": "serial_port", "type": "VARCHAR(20)", "nullable": true, "description": "시리얼 포트"},
          {"name": "status", "type": "VARCHAR(20)", "nullable": false, "default": "IDLE", "description": "상태"},
          {"name": "last_heartbeat", "type": "TIMESTAMPTZ", "nullable": true, "description": "마지막 연결 확인 시각"},
          {"name": "created_at", "type": "TIMESTAMPTZ", "nullable": false, "default": "NOW()", "description": "생성일시"}
        ]
      },
      {
        "name": "WeighRecord",
        "description": "계량 기록",
        "columns": [
          {"name": "id", "type": "BIGSERIAL", "nullable": false, "default": "AUTO", "description": "Primary Key"},
          {"name": "station_id", "type": "BIGINT", "nullable": false, "description": "계량대 FK"},
          {"name": "vehicle_id", "type": "BIGINT", "nullable": false, "description": "차량 FK"},
          {"name": "driver_id", "type": "BIGINT", "nullable": true, "description": "운전기사 FK"},
          {"name": "gross_weight", "type": "DECIMAL(10,2)", "nullable": true, "description": "총중량 (kg)"},
          {"name": "tare_weight", "type": "DECIMAL(10,2)", "nullable": true, "description": "공차중량 (kg)"},
          {"name": "net_weight", "type": "DECIMAL(10,2)", "nullable": true, "description": "순중량 (kg)"},
          {"name": "slip_number", "type": "VARCHAR(20)", "nullable": false, "description": "전표번호 (UNIQUE)"},
          {"name": "weighed_at", "type": "TIMESTAMPTZ", "nullable": false, "default": "NOW()", "description": "계량일시"},
          {"name": "status", "type": "VARCHAR(20)", "nullable": false, "default": "PENDING", "description": "상태"},
          {"name": "erp_sent", "type": "BOOLEAN", "nullable": false, "default": "FALSE", "description": "ERP 전송 여부"},
          {"name": "erp_sent_at", "type": "TIMESTAMPTZ", "nullable": true, "description": "ERP 전송 일시"},
          {"name": "erp_response", "type": "JSONB", "nullable": true, "description": "ERP 응답 데이터"},
          {"name": "created_at", "type": "TIMESTAMPTZ", "nullable": false, "default": "NOW()", "description": "생성일시"},
          {"name": "updated_at", "type": "TIMESTAMPTZ", "nullable": false, "default": "NOW()", "description": "수정일시"}
        ]
      },
      {
        "name": "WaitQueue",
        "description": "대기열",
        "columns": [
          {"name": "id", "type": "BIGSERIAL", "nullable": false, "default": "AUTO", "description": "Primary Key"},
          {"name": "driver_id", "type": "BIGINT", "nullable": false, "description": "운전기사 FK"},
          {"name": "vehicle_id", "type": "BIGINT", "nullable": false, "description": "차량 FK"},
          {"name": "station_id", "type": "BIGINT", "nullable": true, "description": "배정 계량대 FK"},
          {"name": "queue_number", "type": "INTEGER", "nullable": false, "description": "대기 순번"},
          {"name": "status", "type": "VARCHAR(20)", "nullable": false, "default": "WAITING", "description": "상태"},
          {"name": "estimated_time", "type": "INTEGER", "nullable": true, "description": "예상 대기시간 (분)"},
          {"name": "called_at", "type": "TIMESTAMPTZ", "nullable": true, "description": "호출 시각"},
          {"name": "completed_at", "type": "TIMESTAMPTZ", "nullable": true, "description": "완료 시각"},
          {"name": "created_at", "type": "TIMESTAMPTZ", "nullable": false, "default": "NOW()", "description": "생성일시"}
        ]
      },
      {
        "name": "AppUser",
        "description": "앱 사용자",
        "columns": [
          {"name": "id", "type": "BIGSERIAL", "nullable": false, "default": "AUTO", "description": "Primary Key"},
          {"name": "login_id", "type": "VARCHAR(50)", "nullable": false, "description": "로그인 ID (UNIQUE)"},
          {"name": "password_hash", "type": "VARCHAR(255)", "nullable": false, "description": "비밀번호 해시 (bcrypt)"},
          {"name": "role", "type": "VARCHAR(20)", "nullable": false, "default": "DRIVER", "description": "역할"},
          {"name": "driver_id", "type": "BIGINT", "nullable": true, "description": "운전기사 FK"},
          {"name": "fcm_token", "type": "VARCHAR(255)", "nullable": true, "description": "FCM 토큰"},
          {"name": "refresh_token", "type": "VARCHAR(255)", "nullable": true, "description": "Refresh Token"},
          {"name": "last_login_at", "type": "TIMESTAMPTZ", "nullable": true, "description": "마지막 로그인"},
          {"name": "is_active", "type": "BOOLEAN", "nullable": false, "default": "TRUE", "description": "활성 여부"},
          {"name": "created_at", "type": "TIMESTAMPTZ", "nullable": false, "default": "NOW()", "description": "생성일시"},
          {"name": "updated_at", "type": "TIMESTAMPTZ", "nullable": false, "default": "NOW()", "description": "수정일시"}
        ]
      }
    ],
    "indexes": [
      {"table": "vehicle", "name": "idx_vehicle_plate", "columns": ["plate_number"], "type": "B-Tree", "purpose": "차량번호 검색"},
      {"table": "driver", "name": "idx_driver_name", "columns": ["name"], "type": "B-Tree", "purpose": "기사명 검색"},
      {"table": "driver", "name": "idx_driver_company", "columns": ["company_id"], "type": "B-Tree", "purpose": "회사별 기사 조회"},
      {"table": "weigh_record", "name": "idx_record_date", "columns": ["weighed_at"], "type": "B-Tree", "purpose": "날짜별 조회"},
      {"table": "weigh_record", "name": "idx_record_vehicle", "columns": ["vehicle_id"], "type": "B-Tree", "purpose": "차량별 이력 조회"},
      {"table": "weigh_record", "name": "idx_record_slip", "columns": ["slip_number"], "type": "B-Tree", "purpose": "전표번호 검색"},
      {"table": "weigh_record", "name": "idx_record_erp", "columns": ["erp_sent", "weighed_at"], "type": "B-Tree", "purpose": "ERP 미전송 데이터 조회"},
      {"table": "wait_queue", "name": "idx_queue_status", "columns": ["status", "created_at"], "type": "B-Tree", "purpose": "대기열 조회"},
      {"table": "app_user", "name": "idx_user_login", "columns": ["login_id"], "type": "B-Tree", "purpose": "로그인 조회"}
    ]
  },
  "api_specification": {
    "base_url": "/api/v1",
    "authentication": {
      "type": "Bearer Token (JWT)",
      "access_token_expiry": "1시간",
      "refresh_token_expiry": "7일"
    },
    "endpoints": {
      "auth": [
        {"method": "POST", "path": "/auth/login", "description": "로그인", "auth_required": false},
        {"method": "POST", "path": "/auth/refresh", "description": "토큰 갱신", "auth_required": false},
        {"method": "POST", "path": "/auth/logout", "description": "로그아웃", "auth_required": true}
      ],
      "dashboard": [
        {"method": "GET", "path": "/dashboard/realtime", "description": "실시간 대시보드 데이터", "auth_required": true}
      ],
      "weigh_records": [
        {"method": "GET", "path": "/weigh-records", "description": "계량 이력 조회", "auth_required": true},
        {"method": "GET", "path": "/weigh-records/{id}", "description": "계량 상세 조회", "auth_required": true},
        {"method": "GET", "path": "/weigh-records/export", "description": "엑셀 내보내기", "auth_required": true}
      ],
      "vehicles": [
        {"method": "GET", "path": "/vehicles", "description": "차량 목록 조회", "auth_required": true},
        {"method": "POST", "path": "/vehicles", "description": "차량 등록", "auth_required": true},
        {"method": "PUT", "path": "/vehicles/{id}", "description": "차량 수정", "auth_required": true},
        {"method": "DELETE", "path": "/vehicles/{id}", "description": "차량 비활성화", "auth_required": true}
      ],
      "drivers": [
        {"method": "GET", "path": "/drivers", "description": "운전기사 목록 조회", "auth_required": true},
        {"method": "POST", "path": "/drivers", "description": "운전기사 등록 (앱 계정 자동 생성)", "auth_required": true},
        {"method": "PUT", "path": "/drivers/{id}", "description": "운전기사 수정", "auth_required": true},
        {"method": "DELETE", "path": "/drivers/{id}", "description": "운전기사 비활성화", "auth_required": true}
      ],
      "mobile": [
        {"method": "GET", "path": "/mobile/queue/my", "description": "내 대기 순번 조회", "auth_required": true},
        {"method": "GET", "path": "/mobile/records/today", "description": "금일 계량 결과", "auth_required": true},
        {"method": "GET", "path": "/mobile/records/history", "description": "최근 30일 이력", "auth_required": true},
        {"method": "GET", "path": "/mobile/slip/{id}", "description": "전자 전표 조회", "auth_required": true},
        {"method": "POST", "path": "/mobile/slip/{id}/share", "description": "전표 공유", "auth_required": true}
      ],
      "statistics": [
        {"method": "GET", "path": "/statistics/daily", "description": "일간 통계", "auth_required": true},
        {"method": "GET", "path": "/statistics/weekly", "description": "주간 통계", "auth_required": true},
        {"method": "GET", "path": "/statistics/monthly", "description": "월간 통계", "auth_required": true},
        {"method": "GET", "path": "/statistics/export", "description": "리포트 다운로드", "auth_required": true}
      ],
      "internal": [
        {"method": "POST", "path": "/internal/weigh-data", "description": "인디케이터 계량 데이터 수신", "auth_required": true, "auth_type": "API Key"}
      ]
    }
  },
  "security_requirements": {
    "authentication": {
      "method": "JWT (Access Token + Refresh Token)",
      "access_token_expiry": "1시간",
      "refresh_token_expiry": "7일",
      "password_policy": "최소 8자, 영문+숫자+특수문자 조합",
      "password_storage": "bcrypt (cost factor 12)",
      "session_management": "Redis 기반, 동시 로그인 3대 제한",
      "biometric_auth": "모바일 앱 - Face ID / Touch ID / 지문"
    },
    "authorization": {
      "method": "RBAC",
      "roles": ["ADMIN", "STAFF", "DRIVER"]
    },
    "data_security": {
      "transport_encryption": "TLS 1.2 이상 (TLS 1.3 권장)",
      "storage_encryption": "AES-256-GCM (연락처 등 개인정보)",
      "key_management": "AWS KMS (Key Rotation 활성화)",
      "database_encryption": "RDS 암호화 활성화 (At-Rest)",
      "log_masking": "개인정보 필드 자동 마스킹"
    },
    "network_security": {
      "erp_connection": "VPN 또는 전용선 + IP Whitelist",
      "edge_server_auth": "API Key 인증 + IP Whitelist",
      "firewall": "Security Group (최소 권한 원칙)",
      "ddos_protection": "AWS Shield Standard",
      "waf": "AWS WAF (OWASP Top 10 규칙)"
    },
    "security_checklist": [
      "OWASP Top 10 대응",
      "SQL Injection 방지",
      "XSS 방지",
      "CSRF 방지",
      "Rate Limiting (API 분당 100회)",
      "입력값 검증",
      "보안 헤더 설정",
      "의존성 취약점 스캔"
    ]
  },
  "performance_requirements": {
    "response_time": {
      "api_p50": "< 100ms",
      "api_p95": "< 500ms",
      "api_p99": "< 1000ms",
      "web_page_load": "< 2s",
      "mobile_screen_load": "< 3s",
      "websocket_latency": "< 100ms"
    },
    "throughput": {
      "concurrent_web_users": 50,
      "api_tps": 100,
      "websocket_connections": 200,
      "daily_weighing_capacity": 500
    },
    "optimization_strategies": {
      "frontend": [
        "CDN 적용 (CloudFront)",
        "이미지 최적화 (WebP, Lazy Loading)",
        "번들 최적화 (Code Splitting, Tree Shaking)",
        "캐싱 전략 (Service Worker, HTTP Cache)"
      ],
      "backend": [
        "Database Connection Pooling (pool_size=20)",
        "Query Optimization (인덱스 활용, N+1 방지)",
        "Redis 캐싱 (대시보드 데이터, 5초 TTL)",
        "비동기 처리 (FastAPI async/await)",
        "배치 처리 (ERP 전송, 리포트 생성)"
      ],
      "database": [
        "읽기 전용 복제본",
        "월별 파티셔닝 (weigh_record)",
        "정기 VACUUM",
        "쿼리 실행 계획 모니터링"
      ]
    }
  },
  "infrastructure_requirements": {
    "environments": {
      "development": {
        "ecs": {"cpu": "0.5 vCPU", "memory": "1GB", "tasks": 1},
        "rds": "db.t3.micro",
        "elasticache": "cache.t3.micro"
      },
      "staging": {
        "ecs": {"cpu": "1 vCPU", "memory": "2GB", "tasks": 2},
        "rds": "db.t3.small",
        "elasticache": "cache.t3.small"
      },
      "production": {
        "ecs": {"cpu": "2 vCPU", "memory": "4GB", "tasks": "2~4 (Auto Scaling)"},
        "rds": "db.r6g.large, Multi-AZ",
        "elasticache": "cache.r6g.large"
      }
    },
    "edge_server": {
      "hardware": "산업용 미니 PC",
      "cpu": "Intel N100 이상",
      "ram": "8GB",
      "storage": "256GB SSD",
      "os": "Ubuntu 22.04 LTS",
      "network": "유선 이더넷 (고정 IP)",
      "serial_ports": "RS-232 3포트 (USB-to-Serial)"
    },
    "deployment_strategy": {
      "method": "Blue-Green Deployment",
      "rollback": "헬스체크 실패 시 자동 롤백",
      "min_healthy_percent": 50
    },
    "backup_policy": {
      "rds_snapshot_auto": {"frequency": "일 1회", "retention": "7일"},
      "rds_snapshot_manual": {"frequency": "주 1회", "retention": "30일"},
      "s3_slip_images": {"retention": "5년"},
      "logs": {"retention": "90일"}
    },
    "monitoring": {
      "api_server": {"tool": "CloudWatch + X-Ray", "alert": "응답시간 p95 > 1s, 에러율 > 1%"},
      "database": {"tool": "CloudWatch", "alert": "CPU > 80%, 커넥션 > 90%"},
      "cache": {"tool": "CloudWatch", "alert": "메모리 > 80%, 커넥션 > 1000"},
      "edge_server": {"tool": "Prometheus + Grafana", "alert": "연결 끊김, 버퍼 오버플로우"},
      "logs": {"tool": "CloudWatch Logs Insights", "alert": "ERROR 로그 발생"}
    }
  },
  "technical_risks": [
    {
      "id": "TR-001",
      "risk": "B사 인디케이터 프로토콜 미확정",
      "impact": "HIGH",
      "probability": "MEDIUM",
      "mitigation": "프로토콜 문서 수령 일정 확정, 범용 파서 구조로 설계"
    },
    {
      "id": "TR-002",
      "risk": "Edge Server 네트워크 단절",
      "impact": "HIGH",
      "probability": "MEDIUM",
      "mitigation": "SQLite 로컬 버퍼링, 네트워크 복구 시 자동 동기화"
    },
    {
      "id": "TR-003",
      "risk": "ERP 연동 API 변경",
      "impact": "MEDIUM",
      "probability": "LOW",
      "mitigation": "어댑터 패턴 적용, 버전 관리"
    },
    {
      "id": "TR-004",
      "risk": "모바일 앱 스토어 심사 지연",
      "impact": "MEDIUM",
      "probability": "MEDIUM",
      "mitigation": "조기 심사 제출, 사전 리젝 사유 검토"
    },
    {
      "id": "TR-005",
      "risk": "레거시 전광판 호환성",
      "impact": "LOW",
      "probability": "MEDIUM",
      "mitigation": "프로토콜 테스트 선행, 필요 시 교체 검토"
    },
    {
      "id": "TR-006",
      "risk": "동시 접속 부하",
      "impact": "MEDIUM",
      "probability": "LOW",
      "mitigation": "부하 테스트 수행, Auto Scaling 설정 검증"
    },
    {
      "id": "TR-007",
      "risk": "개인정보 보안 사고",
      "impact": "HIGH",
      "probability": "LOW",
      "mitigation": "암호화 적용, 접근 로그 모니터링, 정기 보안 점검"
    }
  ],
  "references": [
    {
      "type": "PRD",
      "path": "workspace/outputs/prd/PRD-20260125-143000.md"
    },
    {
      "type": "PRD (JSON)",
      "path": "workspace/outputs/prd/PRD-20260125-143000.json"
    }
  ]
}
