{
  "id": "PRD-20260125-143000",
  "title": "차량 계량대 시스템 재구축",
  "version": "1.0",
  "status": "draft",
  "created_at": "2026-01-25T14:30:00+09:00",
  "overview": {
    "background": "현재 운영 중인 계량대 시스템은 2008년 도입 이후 15년 이상 운영되어 온 DOS 기반 레거시 시스템으로, 유지보수 인력 확보가 어렵고 수기 전표 작성으로 인한 오기입과 데이터 정합성 문제가 발생하고 있다. 또한 운전기사들의 대기 순번 확인이 어려워 평균 대기 시간 45분, 지속적인 민원이 발생하고 있어 웹 기반 관리 시스템과 모바일 앱 구축을 통한 프로세스 현대화가 필요하다.",
    "goals": [
      "계량 데이터 수기 입력을 100% 자동화하여 오기입 제로화 달성",
      "운전기사 평균 대기 시간을 45분에서 20분 이내로 단축",
      "실시간 대기 순번 확인 및 푸시 알림 제공으로 대기 관련 민원 90% 감소",
      "전자 전표 도입으로 전표 발행 및 공유 프로세스 간소화",
      "웹 대시보드를 통한 실시간 현황 모니터링 및 통계 리포트 자동화"
    ],
    "scope": "웹 기반 관리자용 대시보드, 모바일 앱(운전기사용), 인디케이터 3대 연동(RS-232), ERP 시스템 연동(REST API), 전광판 연동(TCP/IP), Edge Server 구축",
    "out_of_scope": [
      "인디케이터(저울) 하드웨어 교체",
      "ERP 시스템 내부 수정",
      "사전 예약 기능 (향후 Phase 2)",
      "멀티 사이트(타 계량대) 통합"
    ],
    "target_users": [
      "관리자 - 실시간 계량 현황 모니터링, 통계 리포트 조회, 시스템 설정 관리",
      "계량팀 직원 - 차량/운전기사 정보 관리, 계량 이력 조회, 데이터 수정, 엑셀 다운로드",
      "운전기사 - 대기 순번 확인, 푸시 알림 수신, 계량 결과 조회, 전자 전표 확인 및 공유"
    ],
    "success_metrics": [
      "계량 데이터 오기입률: 0% (현재 추정 5%)",
      "운전기사 평균 대기 시간: 20분 이내 (현재 45분)",
      "대기 관련 민원 건수: 90% 감소",
      "모바일 앱 설치율: 등록 운전기사의 80% 이상",
      "시스템 가용성: 연간 99.5% 이상",
      "웹 대시보드 평균 응답 시간: 2초 이내"
    ]
  },
  "functional_requirements": [
    {
      "id": "FR-001",
      "title": "실시간 계량 현황 대시보드",
      "description": "계량대별 현재 상태와 금일 핵심 지표를 실시간으로 표시하는 메인 대시보드",
      "priority": "HIGH",
      "user_story": "계량팀 관리자로서, 나는 3개 계량대의 현재 상태와 금일 처리 현황을 한눈에 파악하기 원한다, 빠른 현황 파악과 의사결정을 위해.",
      "acceptance_criteria": [
        "계량대 3개의 현재 상태(대기/계량중/완료)를 실시간 표시",
        "5초 간격으로 자동 갱신",
        "금일 총 계량 건수, 처리 완료 건수, 평균 처리 시간 표시",
        "현재 대기 중인 차량 목록 및 예상 대기 시간 표시",
        "시간대별 계량 건수를 막대 차트로 시각화"
      ]
    },
    {
      "id": "FR-002",
      "title": "계량 이력 조회",
      "description": "다양한 조건으로 과거 계량 데이터를 검색하고 조회",
      "priority": "HIGH",
      "user_story": "계량팀 직원으로서, 나는 기간/차량번호/운전기사 조건으로 계량 이력을 검색하기 원한다, 특정 데이터를 빠르게 찾기 위해.",
      "acceptance_criteria": [
        "기간별 조회 (시작일~종료일 선택)",
        "차량번호 조건 검색",
        "운전기사명 조건 검색",
        "조회 결과 페이징 처리 (페이지당 20건)",
        "개별 계량 건의 상세 정보 확인 (총중량, 공차중량, 순중량, 계량시간, 담당자)"
      ]
    },
    {
      "id": "FR-003",
      "title": "계량 데이터 엑셀 내보내기",
      "description": "조회된 계량 데이터를 엑셀 파일로 다운로드",
      "priority": "MEDIUM",
      "user_story": "계량팀 직원으로서, 나는 조회된 계량 데이터를 엑셀로 다운로드하기 원한다, 외부 보고 및 분석에 활용하기 위해.",
      "acceptance_criteria": [
        "조회 조건에 따른 결과를 엑셀 파일(.xlsx)로 다운로드",
        "필드: 계량일시, 차량번호, 운전기사, 총중량, 공차중량, 순중량, 전표번호",
        "최대 10,000건까지 한 번에 다운로드 가능"
      ]
    },
    {
      "id": "FR-004",
      "title": "차량 정보 관리",
      "description": "차량 정보 등록, 수정, 삭제 기능",
      "priority": "HIGH",
      "user_story": "계량팀 직원으로서, 나는 차량 정보를 등록하고 관리하기 원한다, 정확한 계량 데이터 관리를 위해.",
      "acceptance_criteria": [
        "차량번호, 차종, 공차중량, 최대적재량, 소속회사 등록",
        "등록된 차량 정보 수정",
        "차량 비활성화 (논리적 삭제)",
        "차량 목록 조회 및 검색"
      ]
    },
    {
      "id": "FR-005",
      "title": "운전기사 정보 관리",
      "description": "운전기사 정보 등록, 수정 및 앱 계정 발급",
      "priority": "HIGH",
      "user_story": "계량팀 직원으로서, 나는 운전기사 정보를 등록하고 앱 계정을 발급하기 원한다, 모바일 앱 이용을 지원하기 위해.",
      "acceptance_criteria": [
        "이름, 연락처, 소속회사, 담당차량 등록",
        "운전기사 정보 수정",
        "모바일 앱 로그인용 계정 자동 생성",
        "계정 정보 SMS 발송"
      ]
    },
    {
      "id": "FR-006",
      "title": "통계 리포트 생성",
      "description": "일간, 주간, 월간 통계 리포트 생성 및 다운로드",
      "priority": "MEDIUM",
      "user_story": "관리자로서, 나는 일/주/월간 통계 리포트를 조회하고 다운로드하기 원한다, 운영 현황을 분석하고 보고하기 위해.",
      "acceptance_criteria": [
        "일간 리포트: 건수, 총 중량, 평균 처리시간",
        "주간 리포트: 전주 대비 비교 포함",
        "월간 리포트: 전월 대비 비교 및 추세 분석",
        "PDF/엑셀 형식으로 다운로드"
      ]
    },
    {
      "id": "FR-007",
      "title": "이상치 알림",
      "description": "설정한 임계값 초과 시 관리자에게 알림 발송",
      "priority": "MEDIUM",
      "user_story": "관리자로서, 나는 총중량 초과 등 이상 상황 발생 시 알림을 받기 원한다, 신속한 대응을 위해.",
      "acceptance_criteria": [
        "총중량 임계값 설정 기능",
        "임계값 초과 시 웹 알림 표시",
        "담당자 이메일 알림 발송 (선택)"
      ]
    },
    {
      "id": "FR-008",
      "title": "모바일 앱 - 대기 순번 확인",
      "description": "운전기사가 자신의 현재 대기 순번과 예상 대기 시간을 확인",
      "priority": "HIGH",
      "user_story": "운전기사로서, 나는 내 대기 순번과 예상 대기 시간을 앱에서 확인하기 원한다, 차에서 편하게 대기하기 위해.",
      "acceptance_criteria": [
        "현재 대기 순번 실시간 표시",
        "내 앞 대기 차량 수 표시",
        "평균 처리 시간 기반 예상 대기 시간 계산 및 표시",
        "실시간 갱신 (5초 간격)"
      ]
    },
    {
      "id": "FR-009",
      "title": "모바일 앱 - 순번 푸시 알림",
      "description": "자기 차례가 임박하거나 도달했을 때 푸시 알림 발송",
      "priority": "HIGH",
      "user_story": "운전기사로서, 나는 내 차례가 가까워지면 푸시 알림을 받기 원한다, 계량대 앞에 제때 도착하기 위해.",
      "acceptance_criteria": [
        "3순번 전 사전 알림 푸시 발송",
        "내 차례 도달 시 호출 알림 푸시 발송 + 진동",
        "iOS/Android 모두 지원 (FCM)",
        "앱 미설치자를 위한 SMS 알림 대안 제공"
      ]
    },
    {
      "id": "FR-010",
      "title": "모바일 앱 - 계량 결과 조회",
      "description": "금일 및 과거 계량 결과 조회",
      "priority": "HIGH",
      "user_story": "운전기사로서, 나는 계량 결과를 앱에서 바로 확인하기 원한다, 별도 전표 없이 결과를 알기 위해.",
      "acceptance_criteria": [
        "금일 계량 결과 (총중량, 공차중량, 순중량) 표시",
        "최근 30일 계량 이력 목록 조회",
        "개별 계량 건 상세 정보 확인"
      ]
    },
    {
      "id": "FR-011",
      "title": "모바일 앱 - 전자 전표",
      "description": "계량 완료 후 전자 전표 확인 및 공유",
      "priority": "HIGH",
      "user_story": "운전기사로서, 나는 전자 전표를 앱에서 확인하고 회사에 공유하기 원한다, 수기 전표 없이 편리하게 제출하기 위해.",
      "acceptance_criteria": [
        "계량 완료 후 전자 전표 자동 생성",
        "앱 내에서 전표 확인",
        "카카오톡, 문자, 이메일로 전표 공유",
        "전표를 이미지(PNG)로 단말기에 저장"
      ]
    },
    {
      "id": "FR-012",
      "title": "인디케이터 연동",
      "description": "기존 3대 인디케이터(저울)에서 RS-232 시리얼 통신으로 계량 데이터 수신",
      "priority": "HIGH",
      "user_story": "시스템으로서, 나는 인디케이터의 계량 데이터를 자동으로 수신하기 원한다, 수기 입력 없이 정확한 데이터를 확보하기 위해.",
      "acceptance_criteria": [
        "A사 인디케이터 2대 연동 (프로토콜: STX,GW,중량값,KG,ST,ETX)",
        "B사 인디케이터 1대 연동 (필드 순서 상이, 프로토콜 확인 완료)",
        "Edge Server에서 데이터 수집 후 API로 중앙 서버 전송",
        "네트워크 단절 시 로컬 버퍼링 (SQLite)"
      ]
    },
    {
      "id": "FR-013",
      "title": "ERP 연동",
      "description": "일 마감 시 계량 데이터를 ERP 시스템으로 자동 전송",
      "priority": "MEDIUM",
      "user_story": "시스템으로서, 나는 일 마감 데이터를 ERP에 자동 전송하기 원한다, 수동 입력 업무를 제거하기 위해.",
      "acceptance_criteria": [
        "REST API 방식 연동 (OAuth 2.0 인증)",
        "일 1회 마감 배치 전송",
        "JSON 배열로 일괄 전송 (최대 1,000건 단위 페이징)",
        "필수 필드: 계량일시, 차량번호, 총중량, 공차중량, 순중량, 계량대ID, 전표번호",
        "전송 실패 시 재시도 정책 적용"
      ]
    },
    {
      "id": "FR-014",
      "title": "전광판 연동",
      "description": "대기 순번을 기존 전광판에 표시",
      "priority": "HIGH",
      "user_story": "시스템으로서, 나는 대기 순번을 전광판에 표시하기 원한다, 앱 미사용자도 순번을 확인할 수 있도록.",
      "acceptance_criteria": [
        "TCP/IP 방식 연동",
        "현재 호출 순번 표시",
        "다음 대기 순번 3개 표시",
        "실시간 갱신"
      ]
    }
  ],
  "non_functional_requirements": [
    {
      "id": "NFR-001",
      "category": "성능",
      "requirements": [
        "웹 대시보드 페이지 로딩: 2초 이내",
        "모바일 앱 화면 로딩: 3초 이내",
        "API 응답 시간: 500ms 이내 (p95)",
        "실시간 데이터 갱신 주기: 5초",
        "웹 시스템 동시 접속: 50명 이상 지원"
      ]
    },
    {
      "id": "NFR-002",
      "category": "보안",
      "requirements": [
        "웹/앱 로그인: JWT 기반 인증",
        "모바일 앱: Refresh Token, 생체 인증 지원",
        "Edge Server: API Key 인증",
        "전송 구간: TLS 1.2 이상 필수",
        "저장 데이터: 개인정보(연락처 등) AES-256 암호화",
        "ERP 연동: VPN 또는 전용선, IP Whitelist"
      ]
    },
    {
      "id": "NFR-003",
      "category": "확장성",
      "requirements": [
        "AWS Auto Scaling 적용 (EC2 2대 기본, 부하 시 자동 확장)",
        "데이터베이스 Multi-AZ 구성 (PostgreSQL)",
        "향후 멀티 사이트 확장 고려한 설계"
      ]
    },
    {
      "id": "NFR-004",
      "category": "가용성",
      "requirements": [
        "연간 가용성: 99.5% 이상",
        "RDS Multi-AZ로 장애 자동 복구",
        "Edge Server 로컬 버퍼링으로 네트워크 단절 대응"
      ]
    },
    {
      "id": "NFR-005",
      "category": "사용성",
      "requirements": [
        "반응형 웹: PC/태블릿 최적화",
        "다크모드 지원 (야간 근무 대응)",
        "모바일 앱: 큰 글씨, 한손 조작, 고대비 모드",
        "디지털 소외 계층 배려: 기존 전광판 및 수기 전표 병행 운영"
      ]
    }
  ],
  "constraints": [
    {
      "id": "CON-001",
      "category": "기술 제약",
      "description": "기존 인디케이터 3대 (A사 2대, B사 1대) 그대로 활용, RS-232 시리얼 통신 프로토콜 준수, ERP 연동은 기존 ERP 외부연동 모듈 REST API 활용"
    },
    {
      "id": "CON-002",
      "category": "일정 제약",
      "description": "요구사항 분석(2024.01~02), 설계(2024.02~03), 개발(2024.03~06), 테스트(2024.06~07), 오픈(2024.08)"
    },
    {
      "id": "CON-003",
      "category": "예산 제약",
      "description": "AWS 인프라 월 비용 한도 내 구성, 추가 하드웨어 구매 최소화 (Edge Server 1대만 신규 도입)"
    },
    {
      "id": "CON-004",
      "category": "외부 의존성",
      "description": "ERP 연동 API 스펙(ERP팀 협의 완료), ERP Staging 환경(2월 5일 이후), B사 인디케이터 프로토콜 문서(수령 예정), iOS 푸시 인증서 발급 필요(FCM)"
    }
  ],
  "milestones": [
    {
      "id": "M1",
      "name": "요구사항 분석 및 설계",
      "period": "2024.01 ~ 2024.03",
      "goal": "상세 요구사항 확정 및 시스템 설계 완료",
      "deliverables": [
        "상세 요구사항 정의서",
        "시스템 아키텍처 설계서",
        "데이터베이스 설계서",
        "UI/UX 디자인 시안",
        "API 명세서"
      ]
    },
    {
      "id": "M2",
      "name": "백엔드 개발",
      "period": "2024.03 ~ 2024.05",
      "goal": "API 서버 및 데이터베이스 구축",
      "deliverables": [
        "FastAPI 기반 API 서버",
        "PostgreSQL 데이터베이스",
        "Edge Server 데이터 수집 프로그램",
        "인디케이터/ERP/전광판 연동 모듈"
      ]
    },
    {
      "id": "M3",
      "name": "프론트엔드 개발",
      "period": "2024.04 ~ 2024.06",
      "goal": "웹 대시보드 및 모바일 앱 개발",
      "deliverables": [
        "React 웹 애플리케이션",
        "Flutter 모바일 앱 (iOS/Android)",
        "실시간 WebSocket 통신"
      ]
    },
    {
      "id": "M4",
      "name": "통합 테스트 및 오픈",
      "period": "2024.06 ~ 2024.08",
      "goal": "시스템 통합 테스트 및 운영 환경 배포",
      "deliverables": [
        "통합 테스트 결과서",
        "사용자 매뉴얼",
        "운영 환경 배포"
      ]
    }
  ],
  "unresolved_items": [
    {
      "id": "UNR-001",
      "type": "결정",
      "description": "B사 인디케이터 프로토콜 상세 스펙 확인 필요",
      "owner": "박민수",
      "priority": "HIGH"
    },
    {
      "id": "UNR-002",
      "type": "결정",
      "description": "iOS 푸시 인증서 발급 절차 및 일정 확정",
      "owner": "최동훈",
      "priority": "MEDIUM"
    },
    {
      "id": "UNR-003",
      "type": "질문",
      "description": "ERP 전송 실패 시 재시도 횟수 및 간격 정책",
      "owner": "ERP팀",
      "priority": "MEDIUM"
    },
    {
      "id": "UNR-004",
      "type": "결정",
      "description": "SMS 알림 서비스 제공업체 선정",
      "owner": "김철수",
      "priority": "LOW"
    },
    {
      "id": "UNR-005",
      "type": "질문",
      "description": "고령 운전기사를 위한 기존 방식 병행 기간",
      "owner": "정수진",
      "priority": "LOW"
    }
  ],
  "source_documents": [
    "킥오프_회의록.txt",
    "이메일_스레드.txt",
    "슬랙_대화기록.txt",
    "운전기사_인터뷰.md",
    "기술_아키텍처_스펙.md",
    "기능_명세서.json",
    "요구사항_정의서.csv",
    "계량_데이터_현황.xlsx",
    "모바일_앱_와이어프레임.png",
    "웹_대시보드_와이어프레임.png",
    "프로젝트_발표자료.pptx",
    "프로젝트_제안서.docx"
  ]
}
