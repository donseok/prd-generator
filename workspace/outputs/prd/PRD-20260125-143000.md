# 차량 계량대 시스템 재구축 PRD (Product Requirements Document)

**버전**: 1.0
**작성일**: 2026-01-25
**상태**: Draft

---

## 1. 개요

### 1.1 배경

현재 운영 중인 계량대 시스템은 2008년 도입 이후 15년 이상 운영되어 온 DOS 기반 레거시 시스템으로, 유지보수 인력 확보가 점점 어려워지고 있다. 특히 계량 완료 후 운전기사에게 전표를 수기로 작성하여 전달하는 과정에서 오기입이 빈번하게 발생하고, 나중에 데이터 정합성을 맞추는 데 상당한 시간이 소요되고 있다.

또한 운전기사들이 현장에서 자신의 대기 순번을 확인하기 어려워 평균 대기 시간이 45분에 달하며, 이로 인한 민원이 지속적으로 발생하고 있다. 기존 전광판이 있으나 멀리서 잘 보이지 않아 운전기사들이 사무실에 직접 문의하는 경우가 많다.

이러한 문제를 해결하기 위해 웹 기반 관리 시스템과 모바일 앱을 구축하여 계량 프로세스의 효율화와 자동화를 달성하고자 한다. 기존 계량대 인디케이터(저울) 3대는 그대로 활용하면서 데이터 수집 및 처리 시스템을 현대화한다.

### 1.2 목표
- 계량 데이터 수기 입력을 100% 자동화하여 오기입 제로화 달성
- 운전기사 평균 대기 시간을 45분에서 20분 이내로 단축
- 실시간 대기 순번 확인 및 푸시 알림 제공으로 대기 관련 민원 90% 감소
- 전자 전표 도입으로 전표 발행 및 공유 프로세스 간소화
- 웹 대시보드를 통한 실시간 현황 모니터링 및 통계 리포트 자동화

### 1.3 범위
#### 포함 범위
- 웹 기반 관리자용 대시보드 (계량 현황, 통계, 차량/기사 관리)
- 모바일 앱 (운전기사용 - 대기 순번, 계량 결과, 전자 전표)
- 기존 인디케이터 3대 연동 (RS-232 시리얼 통신)
- ERP 시스템 연동 (REST API, 일 마감 데이터 전송)
- 전광판 연동 (TCP/IP, 대기 순번 표시)
- Edge Server 구축 (현장 데이터 수집용)

#### 범위 외
- 인디케이터(저울) 하드웨어 교체
- ERP 시스템 내부 수정
- 사전 예약 기능 (향후 Phase 2에서 검토)
- 멀티 사이트(타 계량대) 통합 (향후 확장 고려)

### 1.4 대상 사용자
| 사용자 유형 | 역할 및 주요 활동 |
|------------|------------------|
| 관리자 | 실시간 계량 현황 모니터링, 통계 리포트 조회, 시스템 설정 관리 |
| 계량팀 직원 | 차량/운전기사 정보 관리, 계량 이력 조회, 데이터 수정, 엑셀 다운로드 |
| 운전기사 | 대기 순번 확인, 푸시 알림 수신, 계량 결과 조회, 전자 전표 확인 및 공유 |

### 1.5 성공 지표
- 계량 데이터 오기입률: 0% (현재 추정 5%)
- 운전기사 평균 대기 시간: 20분 이내 (현재 45분)
- 대기 관련 민원 건수: 90% 감소
- 모바일 앱 설치율: 등록 운전기사의 80% 이상
- 시스템 가용성: 연간 99.5% 이상
- 웹 대시보드 평균 응답 시간: 2초 이내

---

## 2. 기능 요구사항 (Functional Requirements)

### FR-001: 실시간 계량 현황 대시보드
**우선순위**: HIGH
**설명**: 계량대별 현재 상태와 금일 핵심 지표를 실시간으로 표시하는 메인 대시보드

**User Story**: 계량팀 관리자로서, 나는 3개 계량대의 현재 상태와 금일 처리 현황을 한눈에 파악하기 원한다, 빠른 현황 파악과 의사결정을 위해.

**Acceptance Criteria**:
- [ ] 계량대 3개의 현재 상태(대기/계량중/완료)를 실시간 표시
- [ ] 5초 간격으로 자동 갱신
- [ ] 금일 총 계량 건수, 처리 완료 건수, 평균 처리 시간 표시
- [ ] 현재 대기 중인 차량 목록 및 예상 대기 시간 표시
- [ ] 시간대별 계량 건수를 막대 차트로 시각화

---

### FR-002: 계량 이력 조회
**우선순위**: HIGH
**설명**: 다양한 조건으로 과거 계량 데이터를 검색하고 조회

**User Story**: 계량팀 직원으로서, 나는 기간/차량번호/운전기사 조건으로 계량 이력을 검색하기 원한다, 특정 데이터를 빠르게 찾기 위해.

**Acceptance Criteria**:
- [ ] 기간별 조회 (시작일~종료일 선택)
- [ ] 차량번호 조건 검색
- [ ] 운전기사명 조건 검색
- [ ] 조회 결과 페이징 처리 (페이지당 20건)
- [ ] 개별 계량 건의 상세 정보 확인 (총중량, 공차중량, 순중량, 계량시간, 담당자)

---

### FR-003: 계량 데이터 엑셀 내보내기
**우선순위**: MEDIUM
**설명**: 조회된 계량 데이터를 엑셀 파일로 다운로드

**User Story**: 계량팀 직원으로서, 나는 조회된 계량 데이터를 엑셀로 다운로드하기 원한다, 외부 보고 및 분석에 활용하기 위해.

**Acceptance Criteria**:
- [ ] 조회 조건에 따른 결과를 엑셀 파일(.xlsx)로 다운로드
- [ ] 필드: 계량일시, 차량번호, 운전기사, 총중량, 공차중량, 순중량, 전표번호
- [ ] 최대 10,000건까지 한 번에 다운로드 가능

---

### FR-004: 차량 정보 관리
**우선순위**: HIGH
**설명**: 차량 정보 등록, 수정, 삭제 기능

**User Story**: 계량팀 직원으로서, 나는 차량 정보를 등록하고 관리하기 원한다, 정확한 계량 데이터 관리를 위해.

**Acceptance Criteria**:
- [ ] 차량번호, 차종, 공차중량, 최대적재량, 소속회사 등록
- [ ] 등록된 차량 정보 수정
- [ ] 차량 비활성화 (논리적 삭제)
- [ ] 차량 목록 조회 및 검색

---

### FR-005: 운전기사 정보 관리
**우선순위**: HIGH
**설명**: 운전기사 정보 등록, 수정 및 앱 계정 발급

**User Story**: 계량팀 직원으로서, 나는 운전기사 정보를 등록하고 앱 계정을 발급하기 원한다, 모바일 앱 이용을 지원하기 위해.

**Acceptance Criteria**:
- [ ] 이름, 연락처, 소속회사, 담당차량 등록
- [ ] 운전기사 정보 수정
- [ ] 모바일 앱 로그인용 계정 자동 생성
- [ ] 계정 정보 SMS 발송

---

### FR-006: 통계 리포트 생성
**우선순위**: MEDIUM
**설명**: 일간, 주간, 월간 통계 리포트 생성 및 다운로드

**User Story**: 관리자로서, 나는 일/주/월간 통계 리포트를 조회하고 다운로드하기 원한다, 운영 현황을 분석하고 보고하기 위해.

**Acceptance Criteria**:
- [ ] 일간 리포트: 건수, 총 중량, 평균 처리시간
- [ ] 주간 리포트: 전주 대비 비교 포함
- [ ] 월간 리포트: 전월 대비 비교 및 추세 분석
- [ ] PDF/엑셀 형식으로 다운로드

---

### FR-007: 이상치 알림
**우선순위**: MEDIUM
**설명**: 설정한 임계값 초과 시 관리자에게 알림 발송

**User Story**: 관리자로서, 나는 총중량 초과 등 이상 상황 발생 시 알림을 받기 원한다, 신속한 대응을 위해.

**Acceptance Criteria**:
- [ ] 총중량 임계값 설정 기능
- [ ] 임계값 초과 시 웹 알림 표시
- [ ] 담당자 이메일 알림 발송 (선택)

---

### FR-008: 모바일 앱 - 대기 순번 확인
**우선순위**: HIGH
**설명**: 운전기사가 자신의 현재 대기 순번과 예상 대기 시간을 확인

**User Story**: 운전기사로서, 나는 내 대기 순번과 예상 대기 시간을 앱에서 확인하기 원한다, 차에서 편하게 대기하기 위해.

**Acceptance Criteria**:
- [ ] 현재 대기 순번 실시간 표시
- [ ] 내 앞 대기 차량 수 표시
- [ ] 평균 처리 시간 기반 예상 대기 시간 계산 및 표시
- [ ] 실시간 갱신 (5초 간격)

---

### FR-009: 모바일 앱 - 순번 푸시 알림
**우선순위**: HIGH
**설명**: 자기 차례가 임박하거나 도달했을 때 푸시 알림 발송

**User Story**: 운전기사로서, 나는 내 차례가 가까워지면 푸시 알림을 받기 원한다, 계량대 앞에 제때 도착하기 위해.

**Acceptance Criteria**:
- [ ] 3순번 전 사전 알림 푸시 발송
- [ ] 내 차례 도달 시 호출 알림 푸시 발송 + 진동
- [ ] iOS/Android 모두 지원 (FCM)
- [ ] 앱 미설치자를 위한 SMS 알림 대안 제공

---

### FR-010: 모바일 앱 - 계량 결과 조회
**우선순위**: HIGH
**설명**: 금일 및 과거 계량 결과 조회

**User Story**: 운전기사로서, 나는 계량 결과를 앱에서 바로 확인하기 원한다, 별도 전표 없이 결과를 알기 위해.

**Acceptance Criteria**:
- [ ] 금일 계량 결과 (총중량, 공차중량, 순중량) 표시
- [ ] 최근 30일 계량 이력 목록 조회
- [ ] 개별 계량 건 상세 정보 확인

---

### FR-011: 모바일 앱 - 전자 전표
**우선순위**: HIGH
**설명**: 계량 완료 후 전자 전표 확인 및 공유

**User Story**: 운전기사로서, 나는 전자 전표를 앱에서 확인하고 회사에 공유하기 원한다, 수기 전표 없이 편리하게 제출하기 위해.

**Acceptance Criteria**:
- [ ] 계량 완료 후 전자 전표 자동 생성
- [ ] 앱 내에서 전표 확인
- [ ] 카카오톡, 문자, 이메일로 전표 공유
- [ ] 전표를 이미지(PNG)로 단말기에 저장

---

### FR-012: 인디케이터 연동
**우선순위**: HIGH
**설명**: 기존 3대 인디케이터(저울)에서 RS-232 시리얼 통신으로 계량 데이터 수신

**User Story**: 시스템으로서, 나는 인디케이터의 계량 데이터를 자동으로 수신하기 원한다, 수기 입력 없이 정확한 데이터를 확보하기 위해.

**Acceptance Criteria**:
- [ ] A사 인디케이터 2대 연동 (프로토콜: STX,GW,중량값,KG,ST,ETX)
- [ ] B사 인디케이터 1대 연동 (필드 순서 상이, 프로토콜 확인 완료)
- [ ] Edge Server에서 데이터 수집 후 API로 중앙 서버 전송
- [ ] 네트워크 단절 시 로컬 버퍼링 (SQLite)

---

### FR-013: ERP 연동
**우선순위**: MEDIUM
**설명**: 일 마감 시 계량 데이터를 ERP 시스템으로 자동 전송

**User Story**: 시스템으로서, 나는 일 마감 데이터를 ERP에 자동 전송하기 원한다, 수동 입력 업무를 제거하기 위해.

**Acceptance Criteria**:
- [ ] REST API 방식 연동 (OAuth 2.0 인증)
- [ ] 일 1회 마감 배치 전송
- [ ] JSON 배열로 일괄 전송 (최대 1,000건 단위 페이징)
- [ ] 필수 필드: 계량일시, 차량번호, 총중량, 공차중량, 순중량, 계량대ID, 전표번호
- [ ] 전송 실패 시 재시도 정책 적용

---

### FR-014: 전광판 연동
**우선순위**: HIGH
**설명**: 대기 순번을 기존 전광판에 표시

**User Story**: 시스템으로서, 나는 대기 순번을 전광판에 표시하기 원한다, 앱 미사용자도 순번을 확인할 수 있도록.

**Acceptance Criteria**:
- [ ] TCP/IP 방식 연동
- [ ] 현재 호출 순번 표시
- [ ] 다음 대기 순번 3개 표시
- [ ] 실시간 갱신

---

## 3. 비기능 요구사항 (Non-Functional Requirements)

### NFR-001: 성능
- 웹 대시보드 페이지 로딩: 2초 이내
- 모바일 앱 화면 로딩: 3초 이내
- API 응답 시간: 500ms 이내 (p95)
- 실시간 데이터 갱신 주기: 5초
- 웹 시스템 동시 접속: 50명 이상 지원

### NFR-002: 보안
- 웹/앱 로그인: JWT 기반 인증
- 모바일 앱: Refresh Token, 생체 인증 지원
- Edge Server: API Key 인증
- 전송 구간: TLS 1.2 이상 필수
- 저장 데이터: 개인정보(연락처 등) AES-256 암호화
- ERP 연동: VPN 또는 전용선, IP Whitelist

### NFR-003: 확장성
- AWS Auto Scaling 적용 (EC2 2대 기본, 부하 시 자동 확장)
- 데이터베이스 Multi-AZ 구성 (PostgreSQL)
- 향후 멀티 사이트 확장 고려한 설계

### NFR-004: 가용성
- 연간 가용성: 99.5% 이상
- RDS Multi-AZ로 장애 자동 복구
- Edge Server 로컬 버퍼링으로 네트워크 단절 대응

### NFR-005: 사용성
- 반응형 웹: PC/태블릿 최적화
- 다크모드 지원 (야간 근무 대응)
- 모바일 앱: 큰 글씨, 한손 조작, 고대비 모드
- 디지털 소외 계층 배려: 기존 전광판 및 수기 전표 병행 운영

---

## 4. 제약조건

### CON-001: 기술 제약
- 기존 인디케이터 3대 (A사 2대, B사 1대) 그대로 활용
- RS-232 시리얼 통신 프로토콜 준수
- ERP 연동: 기존 ERP 외부연동 모듈 REST API 활용

### CON-002: 일정 제약
- 요구사항 분석: 2024.01 ~ 2024.02
- 설계: 2024.02 ~ 2024.03
- 개발: 2024.03 ~ 2024.06
- 테스트: 2024.06 ~ 2024.07
- 오픈: 2024.08 예정

### CON-003: 예산 제약
- AWS 인프라 월 비용 한도 내 구성
- 추가 하드웨어 구매 최소화 (Edge Server 1대만 신규 도입)

### CON-004: 외부 의존성
- ERP 연동 API 스펙 (ERP팀 협의 완료)
- ERP Staging 환경 접근: 2월 5일 이후
- B사 인디케이터 프로토콜 문서 (수령 예정)
- iOS 푸시 인증서 발급 필요 (FCM)

---

## 5. 마일스톤

### M1: 요구사항 분석 및 설계 - 2024.01 ~ 2024.03
**목표**: 상세 요구사항 확정 및 시스템 설계 완료
**주요 산출물**:
- 상세 요구사항 정의서
- 시스템 아키텍처 설계서
- 데이터베이스 설계서
- UI/UX 디자인 시안
- API 명세서

### M2: 백엔드 개발 - 2024.03 ~ 2024.05
**목표**: API 서버 및 데이터베이스 구축
**주요 산출물**:
- FastAPI 기반 API 서버
- PostgreSQL 데이터베이스
- Edge Server 데이터 수집 프로그램
- 인디케이터/ERP/전광판 연동 모듈

### M3: 프론트엔드 개발 - 2024.04 ~ 2024.06
**목표**: 웹 대시보드 및 모바일 앱 개발
**주요 산출물**:
- React 웹 애플리케이션
- Flutter 모바일 앱 (iOS/Android)
- 실시간 WebSocket 통신

### M4: 통합 테스트 및 오픈 - 2024.06 ~ 2024.08
**목표**: 시스템 통합 테스트 및 운영 환경 배포
**주요 산출물**:
- 통합 테스트 결과서
- 사용자 매뉴얼
- 운영 환경 배포

---

## 6. 미해결 사항

| ID | 유형 | 설명 | 담당자 | 우선순위 |
|----|------|------|--------|---------|
| UNR-001 | 결정 | B사 인디케이터 프로토콜 상세 스펙 확인 필요 | 박민수 | HIGH |
| UNR-002 | 결정 | iOS 푸시 인증서 발급 절차 및 일정 확정 | 최동훈 | MEDIUM |
| UNR-003 | 질문 | ERP 전송 실패 시 재시도 횟수 및 간격 정책 | ERP팀 | MEDIUM |
| UNR-004 | 결정 | SMS 알림 서비스 제공업체 선정 | 김철수 | LOW |
| UNR-005 | 질문 | 고령 운전기사를 위한 기존 방식 병행 기간 | 정수진 | LOW |

---

## 7. 부록

### 7.1 용어 정의
| 용어 | 정의 |
|------|------|
| 인디케이터 | 계량대에 설치된 저울 장비, RS-232로 중량 데이터 전송 |
| 총중량 (Gross Weight) | 차량 + 적재물의 전체 중량 |
| 공차중량 (Tare Weight) | 적재물 없이 차량만의 중량 |
| 순중량 (Net Weight) | 총중량 - 공차중량, 순수 적재물 중량 |
| Edge Server | 현장에 설치되어 인디케이터 데이터를 수집하는 서버 |
| FCM | Firebase Cloud Messaging, 모바일 푸시 알림 서비스 |

### 7.2 참고 문서
- 킥오프_회의록.txt
- 이메일_스레드.txt
- 슬랙_대화기록.txt
- 운전기사_인터뷰.md
- 기술_아키텍처_스펙.md
- 기능_명세서.json
- 요구사항_정의서.csv
- 계량_데이터_현황.xlsx
- 모바일_앱_와이어프레임.png
- 웹_대시보드_와이어프레임.png
- 프로젝트_발표자료.pptx
- 프로젝트_제안서.docx

---
*이 문서는 PRD 자동 생성 시스템에 의해 작성되었습니다.*
