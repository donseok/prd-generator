# 유스케이스 스펙 (Use Case Specification)
# PRD 자동 생성 시스템

**버전**: 1.0
**작성일**: 2026-01-22

---

## 1. 액터 정의

| 액터 | 설명 | 주요 역할 |
|------|------|----------|
| PM (Product Manager) | 제품 관리자 | PRD 생성 요청, 검토 및 승인, 최종 문서 확인 |
| BA (Business Analyst) | 비즈니스 분석가 | 요구사항 문서 업로드, 생성된 PRD 검토 |
| 시스템 | PRD 자동 생성 시스템 | 문서 파싱, AI 분석, PRD 생성 |
| Claude AI | AI 서비스 | 요구사항 추출, 분석, 문서 생성 |

---

## 2. 유스케이스 다이어그램

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        PRD 자동 생성 시스템                                   │
│                                                                              │
│    ┌─────────────────────────────────────────────────────────────────┐     │
│    │                                                                   │     │
│    │   ┌──────────────┐          ┌──────────────┐                    │     │
│    │   │   UC-001     │          │   UC-002     │                    │     │
│    │   │ 문서 업로드   │          │ 텍스트 입력  │                    │     │
│    │   └──────┬───────┘          └──────┬───────┘                    │     │
│    │          │                         │                             │     │
│    │          └───────────┬─────────────┘                             │     │
│    │                      │                                           │     │
│    │                      ▼                                           │     │
│    │              ┌──────────────┐                                    │     │
│    │              │   UC-003     │                                    │     │
│    │              │ PRD 생성 시작│                                    │     │
│    │              └──────┬───────┘                                    │     │
│    │                     │                                            │     │
│    │                     ▼                                            │     │
│    │              ┌──────────────┐                                    │     │
│    │              │   UC-004     │                                    │     │
│    │              │ 처리상태확인 │                                    │     │
│    │              └──────┬───────┘                                    │     │
│    │                     │                                            │     │
│    │          ┌──────────┴──────────┐                                │     │
│    │          │                     │                                 │     │
│    │          ▼                     ▼                                 │     │
│    │   ┌──────────────┐     ┌──────────────┐                         │     │
│    │   │   UC-005     │     │   UC-006     │                         │     │
│    │   │ 요구사항검토 │     │ PRD 조회     │                         │     │
│    │   └──────┬───────┘     └──────┬───────┘                         │     │
│    │          │                     │                                 │     │
│    │          ▼                     ▼                                 │     │
│    │   ┌──────────────┐     ┌──────────────┐                         │     │
│    │   │   UC-007     │     │   UC-008     │                         │     │
│    │   │ 검토결정제출 │     │ PRD 내보내기 │                         │     │
│    │   └──────────────┘     └──────────────┘                         │     │
│    │                                                                   │     │
│    └─────────────────────────────────────────────────────────────────┘     │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
          │                                           │
          │                                           │
     ┌────┴────┐                                ┌────┴────┐
     │   PM    │                                │   BA    │
     │         │                                │         │
     └─────────┘                                └─────────┘
```

---

## 3. 유스케이스 상세

### UC-001: 문서 업로드

**유스케이스 ID**: UC-001
**유스케이스명**: 문서 업로드
**액터**: PM, BA
**우선순위**: HIGH

#### 개요
사용자가 PRD 생성을 위한 다양한 형식의 문서를 시스템에 업로드한다.

#### 사전조건
- 사용자가 시스템에 접근 가능한 상태
- 업로드할 문서 파일이 준비된 상태

#### 사후조건
- 문서가 시스템에 저장됨
- 문서 ID가 발급됨
- 메타데이터가 추출됨

#### 기본 흐름

| 단계 | 액터 | 시스템 |
|------|------|--------|
| 1 | 업로드 페이지에 접근 | 업로드 인터페이스 표시 |
| 2 | 파일을 드래그 앤 드롭 또는 선택 | - |
| 3 | - | 파일 형식 검증 |
| 4 | - | 파일 크기 검증 |
| 5 | - | 파일 저장 및 메타데이터 추출 |
| 6 | - | 업로드 완료 및 문서 ID 반환 |
| 7 | 업로드 결과 확인 | - |

#### 대안 흐름

**3a. 지원하지 않는 파일 형식**
1. 시스템이 에러 메시지 표시
2. 사용자가 다른 파일 선택
3. 기본 흐름 3단계로 복귀

**4a. 파일 크기 초과**
1. 시스템이 에러 메시지 표시 (최대 50MB)
2. 사용자가 더 작은 파일 선택
3. 기본 흐름 4단계로 복귀

#### 예외 흐름

**E1. 서버 저장 오류**
1. 시스템이 에러 메시지 표시
2. 사용자에게 재시도 요청

#### 비즈니스 규칙
- BR-001: 지원 형식 - TXT, MD, EML, XLSX, CSV, PPTX, DOCX, PDF, PNG, JPG
- BR-002: 개별 파일 최대 50MB, 총 200MB
- BR-003: 동시에 최대 10개 파일 업로드 가능

---

### UC-002: 텍스트 직접 입력

**유스케이스 ID**: UC-002
**유스케이스명**: 텍스트 직접 입력
**액터**: PM, BA
**우선순위**: HIGH

#### 개요
사용자가 파일 없이 텍스트를 직접 입력하여 PRD 생성에 활용한다.

#### 사전조건
- 사용자가 시스템에 접근 가능한 상태

#### 사후조건
- 입력된 텍스트가 문서로 등록됨
- 문서 ID가 발급됨

#### 기본 흐름

| 단계 | 액터 | 시스템 |
|------|------|--------|
| 1 | 텍스트 입력 탭 선택 | 텍스트 입력 영역 표시 |
| 2 | 텍스트 입력 | - |
| 3 | (선택) 제목 입력 | - |
| 4 | 제출 버튼 클릭 | - |
| 5 | - | 텍스트 길이 검증 |
| 6 | - | 문서 생성 및 ID 반환 |
| 7 | 입력 완료 확인 | - |

#### 대안 흐름

**5a. 텍스트 길이 초과**
1. 시스템이 경고 표시 (최대 50,000자)
2. 사용자가 텍스트 수정
3. 기본 흐름 5단계로 복귀

#### 비즈니스 규칙
- BR-004: 최대 50,000자 입력 가능
- BR-005: 마크다운 형식 지원

---

### UC-003: PRD 생성 시작

**유스케이스 ID**: UC-003
**유스케이스명**: PRD 생성 시작
**액터**: PM, BA
**우선순위**: HIGH

#### 개요
업로드된 문서를 기반으로 PRD 자동 생성 파이프라인을 시작한다.

#### 사전조건
- 최소 1개 이상의 문서가 업로드된 상태

#### 사후조건
- 처리 작업(Job)이 생성됨
- 백그라운드에서 파이프라인이 실행됨

#### 기본 흐름

| 단계 | 액터 | 시스템 |
|------|------|--------|
| 1 | 업로드된 문서 목록 확인 | 문서 목록 표시 |
| 2 | PRD 생성 버튼 클릭 | - |
| 3 | - | 처리 작업(Job) 생성 |
| 4 | - | 백그라운드 파이프라인 시작 |
| 5 | - | Job ID 반환 |
| 6 | 처리 현황 페이지로 이동 | 진행 상황 표시 |

#### 대안 흐름

**2a. 문서가 없는 경우**
1. 시스템이 경고 메시지 표시
2. 사용자가 문서 업로드
3. 기본 흐름 1단계로 복귀

#### 비즈니스 규칙
- BR-006: 동시에 최대 10개 작업 처리 가능

---

### UC-004: 처리 상태 확인

**유스케이스 ID**: UC-004
**유스케이스명**: 처리 상태 확인
**액터**: PM, BA
**우선순위**: MEDIUM

#### 개요
PRD 생성 파이프라인의 진행 상황을 실시간으로 확인한다.

#### 사전조건
- PRD 생성 작업이 시작된 상태

#### 사후조건
- 없음 (조회만 수행)

#### 기본 흐름

| 단계 | 액터 | 시스템 |
|------|------|--------|
| 1 | 처리 현황 페이지 접근 | 현재 상태 표시 |
| 2 | - | 진행률 표시 (0-100%) |
| 3 | - | 현재 처리 단계 표시 |
| 4 | - | 레이어별 완료 상태 표시 |
| 5 | 페이지 갱신 또는 자동 갱신 | 최신 상태 반영 |

#### 상태 표시 정보
- 현재 상태: PENDING, PARSING, NORMALIZING, VALIDATING, GENERATING, PM_REVIEW, COMPLETED, FAILED
- 진행률: 0%, 25%, 50%, 75%, 100%
- 레이어별 소요 시간
- 추출된 요구사항 수

---

### UC-005: 요구사항 검토

**유스케이스 ID**: UC-005
**유스케이스명**: 요구사항 검토
**액터**: PM
**우선순위**: HIGH

#### 개요
AI가 추출한 요구사항 중 신뢰도가 낮거나 검토가 필요한 항목을 확인한다.

#### 사전조건
- 파이프라인이 PM_REVIEW 상태
- 검토 대기 항목이 존재

#### 사후조건
- PM이 검토 항목 내용을 파악함

#### 기본 흐름

| 단계 | 액터 | 시스템 |
|------|------|--------|
| 1 | 검토 페이지 접근 | 검토 대기 목록 표시 |
| 2 | - | 검토 필요 사유 표시 |
| 3 | 개별 항목 선택 | 상세 정보 표시 |
| 4 | - | 원본 텍스트 표시 |
| 5 | - | AI 추출 결과 표시 |
| 6 | - | 수정 제안 표시 |

#### 검토 항목 정보
- 요구사항 ID 및 제목
- 이슈 유형 (LOW_CONFIDENCE, MISSING_INFO, CONFLICT, AMBIGUOUS)
- 이슈 설명
- 원본 텍스트 참조
- AI 수정 제안

---

### UC-006: PRD 조회

**유스케이스 ID**: UC-006
**유스케이스명**: PRD 조회
**액터**: PM, BA
**우선순위**: HIGH

#### 개요
생성 완료된 PRD 문서를 조회한다.

#### 사전조건
- PRD 생성이 완료된 상태 (COMPLETED)

#### 사후조건
- 없음 (조회만 수행)

#### 기본 흐름

| 단계 | 액터 | 시스템 |
|------|------|--------|
| 1 | PRD 목록 페이지 접근 | PRD 목록 표시 |
| 2 | 특정 PRD 선택 | - |
| 3 | - | PRD 상세 페이지 표시 |
| 4 | - | 개요 섹션 표시 |
| 5 | - | 기능 요구사항 목록 표시 |
| 6 | - | 비기능 요구사항 목록 표시 |
| 7 | - | 제약조건 목록 표시 |
| 8 | - | 마일스톤 표시 |
| 9 | - | 미해결 사항 표시 |

#### PRD 표시 정보
- 제목 및 메타데이터 (버전, 상태, 신뢰도)
- 개요 (배경, 목표, 범위, 대상 사용자)
- 기능 요구사항 (FR) 목록
- 비기능 요구사항 (NFR) 목록
- 제약조건 목록
- 마일스톤
- 미해결 사항

---

### UC-007: 검토 결정 제출

**유스케이스 ID**: UC-007
**유스케이스명**: 검토 결정 제출
**액터**: PM
**우선순위**: HIGH

#### 개요
PM이 검토 항목에 대해 승인, 거부, 또는 수정 결정을 내린다.

#### 사전조건
- 검토 대기 항목이 존재
- PM이 검토 페이지에 접근한 상태

#### 사후조건
- 검토 결정이 저장됨
- 결정에 따라 요구사항이 처리됨

#### 기본 흐름

| 단계 | 액터 | 시스템 |
|------|------|--------|
| 1 | 검토 항목 선택 | 상세 정보 표시 |
| 2 | 결정 선택 (승인/거부/수정) | - |
| 3 | (선택) 검토 의견 입력 | - |
| 4 | 결정 제출 | - |
| 5 | - | 결정 저장 |
| 6 | - | 다음 항목 또는 완료 표시 |

#### 대안 흐름

**2a. 수정 선택 시**
1. 시스템이 편집 인터페이스 표시
2. PM이 요구사항 내용 수정
3. 수정된 내용 저장
4. 기본 흐름 4단계로 복귀

**6a. 모든 항목 검토 완료**
1. 시스템이 완료 버튼 활성화
2. PM이 검토 완료 버튼 클릭
3. 시스템이 Layer 4 (PRD 생성) 재개
4. 처리 현황 페이지로 이동

#### 결정 유형
| 결정 | 설명 | 결과 |
|------|------|------|
| 승인 (Approve) | 요구사항을 그대로 사용 | PRD에 포함 |
| 거부 (Reject) | 요구사항 제외 | PRD에서 제외 |
| 수정 (Modify) | 내용 수정 후 사용 | 수정된 내용으로 PRD에 포함 |

---

### UC-008: PRD 내보내기

**유스케이스 ID**: UC-008
**유스케이스명**: PRD 내보내기
**액터**: PM, BA
**우선순위**: MEDIUM

#### 개요
생성된 PRD를 다양한 형식으로 내보내기 한다.

#### 사전조건
- PRD 조회 상태
- PRD가 COMPLETED 상태

#### 사후조건
- 선택한 형식의 파일이 다운로드됨

#### 기본 흐름

| 단계 | 액터 | 시스템 |
|------|------|--------|
| 1 | 내보내기 버튼 클릭 | 형식 선택 옵션 표시 |
| 2 | 형식 선택 (Markdown/JSON) | - |
| 3 | - | 선택한 형식으로 변환 |
| 4 | - | 파일 다운로드 제공 |
| 5 | 파일 저장 | - |

#### 지원 형식
| 형식 | 확장자 | 설명 |
|------|--------|------|
| Markdown | .md | 읽기 쉬운 텍스트 형식 |
| JSON | .json | 구조화된 데이터 형식 |

---

## 4. 유스케이스 관계

### 4.1 포함 관계 (Include)

```
UC-003 (PRD 생성 시작)
    │
    ├──《include》──→ 문서 검증 (내부)
    │
    └──《include》──→ 작업 생성 (내부)


UC-007 (검토 결정 제출)
    │
    └──《include》──→ 결정 저장 (내부)
```

### 4.2 확장 관계 (Extend)

```
UC-004 (처리 상태 확인)
    │
    ├──《extend》──→ UC-005 (요구사항 검토)
    │                 조건: status == PM_REVIEW
    │
    └──《extend》──→ UC-006 (PRD 조회)
                      조건: status == COMPLETED


UC-006 (PRD 조회)
    │
    └──《extend》──→ UC-008 (PRD 내보내기)
```

### 4.3 일반화 관계 (Generalization)

```
문서 입력 (추상)
    │
    ├── UC-001 (문서 업로드)
    │
    └── UC-002 (텍스트 직접 입력)
```

---

## 5. 시나리오

### 시나리오 1: 기본 PRD 생성 플로우

**시나리오명**: 회의록으로 PRD 생성
**액터**: PM
**설명**: PM이 회의록 파일을 업로드하여 PRD를 생성하는 전체 과정

**단계**:
1. PM이 업로드 페이지에 접근
2. PM이 "회의록.txt" 파일을 드래그 앤 드롭
3. 시스템이 파일을 저장하고 문서 ID 반환
4. PM이 "PRD 생성" 버튼 클릭
5. 시스템이 백그라운드에서 파이프라인 실행
6. PM이 처리 현황 페이지에서 진행 상황 확인
7. 파이프라인 완료 (신뢰도 높아 검토 없이 완료)
8. PM이 PRD 조회 페이지에서 결과 확인
9. PM이 Markdown 형식으로 내보내기

---

### 시나리오 2: PM 검토가 필요한 플로우

**시나리오명**: 낮은 신뢰도 요구사항 검토
**액터**: PM
**설명**: AI 추출 결과 중 신뢰도가 낮은 항목을 PM이 검토하는 과정

**단계**:
1. PM이 여러 문서 업로드 (회의록, 이메일, 슬랙 로그)
2. PRD 생성 시작
3. 파이프라인 실행 중 Layer 3에서 3개 항목 검토 필요 판정
4. 시스템 상태가 PM_REVIEW로 변경
5. PM이 검토 페이지에서 대기 항목 확인
6. 첫 번째 항목: "시스템이 빠르게 동작해야 함" - 모호함
   - PM이 "응답 시간 3초 이내"로 수정 후 수정 결정
7. 두 번째 항목: "다크모드 지원" - 신뢰도 0.65
   - PM이 내용 확인 후 승인 결정
8. 세 번째 항목: 중복 요구사항
   - PM이 거부 결정
9. 검토 완료 버튼 클릭
10. 시스템이 Layer 4 재개
11. PRD 생성 완료

---

### 시나리오 3: 다양한 형식의 문서 처리

**시나리오명**: 복합 문서 PRD 생성
**액터**: BA
**설명**: 여러 형식의 문서를 함께 처리하는 과정

**단계**:
1. BA가 다음 파일들 업로드:
   - 요구사항_정의서.xlsx
   - 킥오프_회의록.txt
   - 와이어프레임.png
   - 이메일_스레드.eml
2. PRD 생성 시작
3. 시스템이 각 파일 형식에 맞는 파서로 처리:
   - Excel → 구조화된 데이터 추출
   - 텍스트 → 섹션 구분
   - 이미지 → AI 분석
   - 이메일 → 헤더 + 본문 추출
4. 정규화 단계에서 모든 소스의 요구사항 통합
5. 검증 단계에서 중복/충돌 확인
6. PRD 생성 완료
7. BA가 결과 확인 및 내보내기

---

## 6. 비기능 요구사항 관련 유스케이스

### UC-NF-001: 처리 성능

**요구사항**: 단일 문서 파싱 10초 이내

**검증 시나리오**:
1. 50MB Excel 파일 업로드
2. PRD 생성 시작
3. Layer 1 완료 시간 측정
4. 10초 이내 완료 확인

---

### UC-NF-002: 동시 처리

**요구사항**: 동시 10개 작업 처리

**검증 시나리오**:
1. 10명의 사용자가 동시에 PRD 생성 시작
2. 모든 작업이 정상 실행되는지 확인
3. 11번째 작업 시작 시 대기열에 추가되는지 확인

---

### UC-NF-003: 에러 복구

**요구사항**: Claude AI 호출 실패 시 자동 재시도

**검증 시나리오**:
1. PRD 생성 시작
2. (시뮬레이션) 첫 번째 Claude AI 호출 실패
3. 시스템이 자동으로 재시도
4. 두 번째 시도 성공
5. 파이프라인 정상 완료

---

## 7. 용어 정의

| 용어 | 정의 |
|------|------|
| PRD | Product Requirements Document, 제품 요구사항 문서 |
| FR | Functional Requirement, 기능 요구사항 |
| NFR | Non-Functional Requirement, 비기능 요구사항 |
| 파이프라인 | 4-Layer 처리 과정 (파싱→정규화→검증→생성) |
| 신뢰도 점수 | AI가 추출한 요구사항의 정확성 확신 수준 (0.0~1.0) |
| 검토 항목 | PM 검토가 필요한 요구사항 |

---

## 8. 참조

- PRD_제품요구사항정의서.md
- TRD_기술요구사항정의서.md
- 기능명세서.md
- 프로세스_개념도.md
